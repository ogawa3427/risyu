<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ラジオボタンとCookie</title>
</head>
<body>

<!-- 説明文 -->
<p>以下のオプションから選択してください。選択した後、戻るリンクをクリックすると、選択が保存されます。</p>

<!-- ラジオボタン -->
<form id="myForm">
    <label>
        <input type="radio" name="option" value="option1"> オプション1
    </label><br>
    <label>
        <input type="radio" name="option" value="option2"> オプション2
    </label><br>
</form>

<!-- 戻るリンク -->
<a href="{{ url_for('index') }}" onclick="saveToCookie()">戻る</a>

<script>
function getCookie(name) {
    var value = "; " + document.cookie;
    var parts = value.split("; " + name + "=");
    if (parts.length == 2) return parts.pop().split(";").shift();
}

function saveToCookie() {
    // ラジオボタンの値を取得
    var radios = document.getElementsByName('option');
    var selectedValue;
    for (var i = 0; i < radios.length; i++) {
        if (radios[i].checked) {
            selectedValue = radios[i].value;
            break;
        }
    }

    // Cookieに保存
    if (selectedValue) {
        document.cookie = "selectedOption=" + selectedValue + ";path=/";
    }
}

// ページ読み込み時にCookieから初期値を取得して設定
window.onload = function() {
    var savedOption = getCookie("selectedOption");
    if (savedOption) {
        var radios = document.getElementsByName('option');
        for (var i = 0; i < radios.length; i++) {
            if (radios[i].value === savedOption) {
                radios[i].checked = true;
                break;
            }
        }
    }
}
</script>

</body>
</html>
